<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{
  &quot;stats&quot;: {
    &quot;suites&quot;: 31,
    &quot;tests&quot;: 59,
    &quot;passes&quot;: 29,
    &quot;pending&quot;: 0,
    &quot;failures&quot;: 30,
    &quot;start&quot;: &quot;2017-10-31T01:32:06.752Z&quot;,
    &quot;end&quot;: &quot;2017-10-31T01:32:10.941Z&quot;,
    &quot;duration&quot;: 4189,
    &quot;testsRegistered&quot;: 59,
    &quot;passPercent&quot;: 49.2,
    &quot;pendingPercent&quot;: 0,
    &quot;other&quot;: 0,
    &quot;hasOther&quot;: false,
    &quot;skipped&quot;: 0,
    &quot;hasSkipped&quot;: false,
    &quot;passPercentClass&quot;: &quot;danger&quot;,
    &quot;pendingPercentClass&quot;: &quot;danger&quot;
  },
  &quot;suites&quot;: {
    &quot;title&quot;: &quot;&quot;,
    &quot;suites&quot;: [
      {
        &quot;title&quot;: &quot;app&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should handle socket errors&quot;,
            &quot;fullTitle&quot;: &quot;app should handle socket errors&quot;,
            &quot;timedOut&quot;: true,
            &quot;duration&quot;: 2007,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // triggers this.socket.writable == false\n  this.socket.emit(&#x27;error&#x27;, new Error(&#x27;boom&#x27;));\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
              &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;641c0b23-c5ca-4d08-b4fc-f980769e69a1&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not .writeHead when !socket.writable&quot;,
            &quot;fullTitle&quot;: &quot;app should not .writeHead when !socket.writable&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 3,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // set .writable to false\n  this.socket.writable = false;\n  this.status = 204;\n  // throw if .writeHead or .end is called\n  this.res.writeHead =\n  this.res.end = function(){\n    throw new Error(&#x27;response sent&#x27;);\n  };\n})\n// hackish, but the response should occur in a single tick\nsetImmediate(done);\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;e4b08348-010b-484d-9600-22eac21434a0&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should set development env when NODE_ENV missing&quot;,
            &quot;fullTitle&quot;: &quot;app should set development env when NODE_ENV missing&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var NODE_ENV = process.env.NODE_ENV;\nprocess.env.NODE_ENV = &#x27;&#x27;;\nvar app = koa();\nprocess.env.NODE_ENV = NODE_ENV;\nassert.equal(app.env, &#x27;development&#x27;);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;e964ad37-0db4-489f-bcd8-436713cbcf2c&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;should not .writeHead when !socket.writable&quot;,
            &quot;fullTitle&quot;: &quot;app should not .writeHead when !socket.writable&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 3,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // set .writable to false\n  this.socket.writable = false;\n  this.status = 204;\n  // throw if .writeHead or .end is called\n  this.res.writeHead =\n  this.res.end = function(){\n    throw new Error(&#x27;response sent&#x27;);\n  };\n})\n// hackish, but the response should occur in a single tick\nsetImmediate(done);\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;e4b08348-010b-484d-9600-22eac21434a0&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should set development env when NODE_ENV missing&quot;,
            &quot;fullTitle&quot;: &quot;app should set development env when NODE_ENV missing&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var NODE_ENV = process.env.NODE_ENV;\nprocess.env.NODE_ENV = &#x27;&#x27;;\nvar app = koa();\nprocess.env.NODE_ENV = NODE_ENV;\nassert.equal(app.env, &#x27;development&#x27;);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;e964ad37-0db4-489f-bcd8-436713cbcf2c&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [
          {
            &quot;title&quot;: &quot;should handle socket errors&quot;,
            &quot;fullTitle&quot;: &quot;app should handle socket errors&quot;,
            &quot;timedOut&quot;: true,
            &quot;duration&quot;: 2007,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // triggers this.socket.writable == false\n  this.socket.emit(&#x27;error&#x27;, new Error(&#x27;boom&#x27;));\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
              &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;641c0b23-c5ca-4d08-b4fc-f980769e69a1&quot;,
            &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 3,
        &quot;totalPasses&quot;: 2,
        &quot;totalFailures&quot;: 1,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: true,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 2010,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.toJSON()&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should work&quot;,
            &quot;fullTitle&quot;: &quot;app.toJSON() should work&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar obj = app.toJSON();\nobj.should.eql({\n  subdomainOffset: 2,\n  proxy: false,\n  env: &#x27;test&#x27;\n});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:69:15)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;a28e7671-a15e-423a-9761-1ec60dec35c2&quot;,
            &quot;parentUUID&quot;: &quot;8b74cd26-5c31-4d9b-ba0d-6f4668b6e1a0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;8b74cd26-5c31-4d9b-ba0d-6f4668b6e1a0&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [
          {
            &quot;title&quot;: &quot;should work&quot;,
            &quot;fullTitle&quot;: &quot;app.toJSON() should work&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar obj = app.toJSON();\nobj.should.eql({\n  subdomainOffset: 2,\n  proxy: false,\n  env: &#x27;test&#x27;\n});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:69:15)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;a28e7671-a15e-423a-9761-1ec60dec35c2&quot;,
            &quot;parentUUID&quot;: &quot;8b74cd26-5c31-4d9b-ba0d-6f4668b6e1a0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 1,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 1,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: true,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.inspect()&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should work&quot;,
            &quot;fullTitle&quot;: &quot;app.inspect() should work&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 3,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar util = require(&#x27;util&#x27;);\nvar str = util.inspect(app);\nassert.equal(\&quot;{ subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\&quot;, str);&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;&quot;,
              &quot;estack&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;\n    at Context.&lt;anonymous&gt; (test/application.js:82:12)&quot;,
              &quot;diff&quot;: &quot;- { subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\n+ { subdomainOffset: 2, proxy: false, env: &#x27;undefined&#x27; }\n&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;a0d003d7-8d34-4ca1-823e-32626b3b20c6&quot;,
            &quot;parentUUID&quot;: &quot;73350234-abae-45dd-abb8-ca709c897710&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;73350234-abae-45dd-abb8-ca709c897710&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [
          {
            &quot;title&quot;: &quot;should work&quot;,
            &quot;fullTitle&quot;: &quot;app.inspect() should work&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 3,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar util = require(&#x27;util&#x27;);\nvar str = util.inspect(app);\nassert.equal(\&quot;{ subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\&quot;, str);&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;&quot;,
              &quot;estack&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;\n    at Context.&lt;anonymous&gt; (test/application.js:82:12)&quot;,
              &quot;diff&quot;: &quot;- { subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\n+ { subdomainOffset: 2, proxy: false, env: &#x27;undefined&#x27; }\n&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;a0d003d7-8d34-4ca1-823e-32626b3b20c6&quot;,
            &quot;parentUUID&quot;: &quot;73350234-abae-45dd-abb8-ca709c897710&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 1,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 1,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: true,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 3,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.use(fn)&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should compose middleware&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should compose middleware&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar calls = [];\napp.use(function *(next){\n  calls.push(1);\n  yield next;\n  calls.push(6);\n});\napp.use(function *(next){\n  calls.push(2);\n  yield next;\n  calls.push(5);\n});\napp.use(function *(next){\n  calls.push(3);\n  yield next;\n  calls.push(4);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404)\n.end(function(err){\n  if (err) return done(err);\n  calls.should.eql([1,2,3,4,5,6]);\n  done();\n});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:116:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;8177e9bf-2589-412e-a46b-28d20c145fe2&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should error when a non-generator function is passed&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should error when a non-generator function is passed&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.use(function(){});\n} catch (err) {\n  err.message.should.equal(&#x27;app.use() requires a generator function&#x27;);\n}&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:127:25)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;69805d01-fc25-433e-bde6-80ff8a3c3c4c&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not error when a non-generator function is passed when .experimental=true&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should not error when a non-generator function is passed when .experimental=true&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.experimental = true;\napp.use(function(){});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;5fa9b996-9292-45de-8bf2-6b059f006f36&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;should not error when a non-generator function is passed when .experimental=true&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should not error when a non-generator function is passed when .experimental=true&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.experimental = true;\napp.use(function(){});&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;5fa9b996-9292-45de-8bf2-6b059f006f36&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [
          {
            &quot;title&quot;: &quot;should compose middleware&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should compose middleware&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar calls = [];\napp.use(function *(next){\n  calls.push(1);\n  yield next;\n  calls.push(6);\n});\napp.use(function *(next){\n  calls.push(2);\n  yield next;\n  calls.push(5);\n});\napp.use(function *(next){\n  calls.push(3);\n  yield next;\n  calls.push(4);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404)\n.end(function(err){\n  if (err) return done(err);\n  calls.should.eql([1,2,3,4,5,6]);\n  done();\n});&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:116:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;8177e9bf-2589-412e-a46b-28d20c145fe2&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should error when a non-generator function is passed&quot;,
            &quot;fullTitle&quot;: &quot;app.use(fn) should error when a non-generator function is passed&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.use(function(){});\n} catch (err) {\n  err.message.should.equal(&#x27;app.use() requires a generator function&#x27;);\n}&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:127:25)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;69805d01-fc25-433e-bde6-80ff8a3c3c4c&quot;,
            &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 3,
        &quot;totalPasses&quot;: 1,
        &quot;totalFailures&quot;: 2,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: true,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.onerror(err)&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should throw an error if a non-error is given&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should throw an error if a non-error is given&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.onerror(&#x27;foo&#x27;);\n  should.fail();\n} catch (err) {\n  err.should.be.instanceOf(AssertionError);\n  err.message.should.equal(&#x27;non-error thrown: foo&#x27;);\n}\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:147:17)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;358fb66c-7786-4af2-b5b1-96f23f6a2f02&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should do nothing if status is 404&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if status is 404&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar err = new Error();\nerr.status = 404;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:164:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;fd7cbfdd-5741-4f08-94aa-396404120cd7&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should do nothing if .silent&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if .silent&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.silent = true;\nvar err = new Error();\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:178:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;0ddf2c30-9286-4d0b-a67d-5143b9dc0ac8&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should log the error to stderr&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should log the error to stderr&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error();\nerr.stack = &#x27;Foo&#x27;;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Foo\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:194:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;29e363fd-acdc-41e7-a1b3-ae26973e084b&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should use err.toString() instad of err.stack&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should use err.toString() instad of err.stack&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error(&#x27;mock stack null&#x27;);\nerr.stack = null;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Error: mock stack null\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:210:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;d9915255-f6ab-458b-a2e4-abba6291c7d7&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [
          {
            &quot;title&quot;: &quot;should throw an error if a non-error is given&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should throw an error if a non-error is given&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.onerror(&#x27;foo&#x27;);\n  should.fail();\n} catch (err) {\n  err.should.be.instanceOf(AssertionError);\n  err.message.should.equal(&#x27;non-error thrown: foo&#x27;);\n}\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:147:17)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;358fb66c-7786-4af2-b5b1-96f23f6a2f02&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should do nothing if status is 404&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if status is 404&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\nvar err = new Error();\nerr.status = 404;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:164:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;fd7cbfdd-5741-4f08-94aa-396404120cd7&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should do nothing if .silent&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if .silent&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.silent = true;\nvar err = new Error();\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:178:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;0ddf2c30-9286-4d0b-a67d-5143b9dc0ac8&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should log the error to stderr&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should log the error to stderr&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error();\nerr.stack = &#x27;Foo&#x27;;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Foo\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:194:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;29e363fd-acdc-41e7-a1b3-ae26973e084b&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should use err.toString() instad of err.stack&quot;,
            &quot;fullTitle&quot;: &quot;app.onerror(err) should use err.toString() instad of err.stack&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 0,
            &quot;state&quot;: &quot;failed&quot;,
            &quot;pass&quot;: false,
            &quot;fail&quot;: true,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error(&#x27;mock stack null&#x27;);\nerr.stack = null;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Error: mock stack null\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
            &quot;err&quot;: {
              &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
              &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:210:18)&quot;
            },
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;d9915255-f6ab-458b-a2e4-abba6291c7d7&quot;,
            &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 5,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 5,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: true,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.respond&quot;,
        &quot;suites&quot;: [
          {
            &quot;title&quot;: &quot;when this.respond === false&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should bypass app.respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when this.respond === false should bypass app.respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 5,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n  this.respond = false;\n  var res = this.res;\n  res.statusCode = 200;\n  setImmediate(function(){\n    res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);\n    res.end(&#x27;lol&#x27;);\n  })\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;lol&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d4757f82-922f-423b-9d41-20e0a6b52b47&quot;,
                &quot;parentUUID&quot;: &quot;3b1616fc-ba5a-442d-a120-56ae802163dc&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;3b1616fc-ba5a-442d-a120-56ae802163dc&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should bypass app.respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when this.respond === false should bypass app.respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 5,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n  this.respond = false;\n  var res = this.res;\n  res.statusCode = 200;\n  setImmediate(function(){\n    res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);\n    res.end(&#x27;lol&#x27;);\n  })\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;lol&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d4757f82-922f-423b-9d41-20e0a6b52b47&quot;,
                &quot;parentUUID&quot;: &quot;3b1616fc-ba5a-442d-a120-56ae802163dc&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 5,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when this.type === null&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should not send Content-Type header&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when this.type === null should not send Content-Type header&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n  this.type = null;\n});\nvar server = app.listen();\nrequest(server)\n  .get(&#x27;/&#x27;)\n  .expect(200)\n  .end(function(err, res){\n    if (err) return done(err);\n    res.should.not.have.header(&#x27;content-type&#x27;);\n    done();\n  });&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:259:21)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;ccf23d22-a600-4811-b314-92ca7556169d&quot;,
                &quot;parentUUID&quot;: &quot;23a00d81-2f84-437a-826c-57438095502a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;23a00d81-2f84-437a-826c-57438095502a&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should not send Content-Type header&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when this.type === null should not send Content-Type header&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n  this.type = null;\n});\nvar server = app.listen();\nrequest(server)\n  .get(&#x27;/&#x27;)\n  .expect(200)\n  .end(function(err, res){\n    if (err) return done(err);\n    res.should.not.have.header(&#x27;content-type&#x27;);\n    done();\n  });&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:259:21)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;ccf23d22-a600-4811-b314-92ca7556169d&quot;,
                &quot;parentUUID&quot;: &quot;23a00d81-2f84-437a-826c-57438095502a&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 0,
            &quot;totalFailures&quot;: 1,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: false,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 0,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when HEAD is used&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should not respond with the body&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should not respond with the body&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;5&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:280:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bb622080-4d63-41a1-ab8c-8b4b08159a36&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep json headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep json headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;17&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:301:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3925ce76-d623-4aa5-959d-fa570174ad3a&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep string headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep string headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello world&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:322:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;8f285de3-8c37-4264-be1c-b8a01df76d10&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep buffer headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep buffer headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;hello world&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:343:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;dba5488f-3190-4f5e-8f36-d78d7083f058&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond with a 404 if no body was set&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should respond with a 404 if no body was set&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;6ef1bf0b-8867-40dc-bfa4-235ad1edf12d&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond with a 200 if body = \&quot;\&quot;&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should respond with a 200 if body = \&quot;\&quot;&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f3f7f9fb-97bf-4c37-aecc-19205fd3026f&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should not overwrite the content-type&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should not overwrite the content-type&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.type = &#x27;application/javascript&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(&#x27;content-type&#x27;, /application\\/javascript/)\n.expect(200, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3bf1473b-b0bc-4dac-aa51-d0ad0b398cd1&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should respond with a 404 if no body was set&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should respond with a 404 if no body was set&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 1,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;6ef1bf0b-8867-40dc-bfa4-235ad1edf12d&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond with a 200 if body = \&quot;\&quot;&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should respond with a 200 if body = \&quot;\&quot;&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f3f7f9fb-97bf-4c37-aecc-19205fd3026f&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should not overwrite the content-type&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should not overwrite the content-type&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.type = &#x27;application/javascript&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(&#x27;content-type&#x27;, /application\\/javascript/)\n.expect(200, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3bf1473b-b0bc-4dac-aa51-d0ad0b398cd1&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should not respond with the body&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should not respond with the body&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;5&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:280:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bb622080-4d63-41a1-ab8c-8b4b08159a36&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep json headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep json headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;17&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:301:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3925ce76-d623-4aa5-959d-fa570174ad3a&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep string headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep string headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello world&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:322:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;8f285de3-8c37-4264-be1c-b8a01df76d10&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep buffer headers&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when HEAD is used should keep buffer headers&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;hello world&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:343:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;dba5488f-3190-4f5e-8f36-d78d7083f058&quot;,
                &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 7,
            &quot;totalPasses&quot;: 3,
            &quot;totalFailures&quot;: 4,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 6,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when no middleware are present&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should 404&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when no middleware are present should 404&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;94d88e17-d802-4088-b956-635e5f49be12&quot;,
                &quot;parentUUID&quot;: &quot;921e832d-9a06-43ba-8488-8672b93ec7a4&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;921e832d-9a06-43ba-8488-8672b93ec7a4&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should 404&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when no middleware are present should 404&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;94d88e17-d802-4088-b956-635e5f49be12&quot;,
                &quot;parentUUID&quot;: &quot;921e832d-9a06-43ba-8488-8672b93ec7a4&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when res has already been written to&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should not cause an app error&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when res has already been written to should not cause an app error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;)\n  }, 0);\n});\nvar errorCaught = false;\napp.on(&#x27;error&#x27;, function(err){\n  errorCaught = err;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  if (errorCaught) return done(errorCaught);\n  done();\n});&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b6da8b84-d370-4475-84e6-9cddc36c57ee&quot;,
                &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should send the right body&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when res has already been written to should send the right body&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;);\n  }, 0);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;HelloGoodbye&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;7d6da28f-bc95-418c-b29d-6c2dc8dad747&quot;,
                &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should not cause an app error&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when res has already been written to should not cause an app error&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;)\n  }, 0);\n});\nvar errorCaught = false;\napp.on(&#x27;error&#x27;, function(err){\n  errorCaught = err;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  if (errorCaught) return done(errorCaught);\n  done();\n});&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b6da8b84-d370-4475-84e6-9cddc36c57ee&quot;,
                &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should send the right body&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when res has already been written to should send the right body&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;);\n  }, 0);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;HelloGoodbye&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;7d6da28f-bc95-418c-b29d-6c2dc8dad747&quot;,
                &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 2,
            &quot;totalPasses&quot;: 2,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 6,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is missing&quot;,
            &quot;suites&quot;: [
              {
                &quot;title&quot;: &quot;with status=400&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the associated status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=400 should respond with the associated status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 400;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(400)\n.expect(&#x27;Content-Length&#x27;, 11)\n.expect(&#x27;Bad Request&#x27;, done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;0c9b02ab-8946-4bfe-930d-4603bab209d7&quot;,
                    &quot;parentUUID&quot;: &quot;6925725c-45d6-42e2-9a52-3c248ad805d8&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;6925725c-45d6-42e2-9a52-3c248ad805d8&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the associated status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=400 should respond with the associated status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 400;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(400)\n.expect(&#x27;Content-Length&#x27;, 11)\n.expect(&#x27;Bad Request&#x27;, done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;0c9b02ab-8946-4bfe-930d-4603bab209d7&quot;,
                    &quot;parentUUID&quot;: &quot;6925725c-45d6-42e2-9a52-3c248ad805d8&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;failures&quot;: [],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 1,
                &quot;totalFailures&quot;: 0,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: true,
                &quot;hasFailures&quot;: false,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 2,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with status=204&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=204 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:497:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;7b05533d-7565-4c3c-aa62-f5d7909327d5&quot;,
                    &quot;parentUUID&quot;: &quot;dd9f8e31-a5c0-478b-adee-fda9f25ef136&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;dd9f8e31-a5c0-478b-adee-fda9f25ef136&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [],
                &quot;failures&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=204 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:497:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;7b05533d-7565-4c3c-aa62-f5d7909327d5&quot;,
                    &quot;parentUUID&quot;: &quot;dd9f8e31-a5c0-478b-adee-fda9f25ef136&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 0,
                &quot;totalFailures&quot;: 1,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: false,
                &quot;hasFailures&quot;: true,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 0,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with status=205&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=205 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:520:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;e87e9832-d786-46da-a15b-466e0abefe27&quot;,
                    &quot;parentUUID&quot;: &quot;71adb34d-5a70-4749-a456-3c5ea7b73829&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;71adb34d-5a70-4749-a456-3c5ea7b73829&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [],
                &quot;failures&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=205 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:520:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;e87e9832-d786-46da-a15b-466e0abefe27&quot;,
                    &quot;parentUUID&quot;: &quot;71adb34d-5a70-4749-a456-3c5ea7b73829&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 0,
                &quot;totalFailures&quot;: 1,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: false,
                &quot;hasFailures&quot;: true,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 0,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with status=304&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=304 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:543:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;71c6bbea-6258-48b5-875b-c0f2c200cbb4&quot;,
                    &quot;parentUUID&quot;: &quot;58c6ba24-57cf-4b09-8342-d5724b82f915&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;58c6ba24-57cf-4b09-8342-d5724b82f915&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [],
                &quot;failures&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond without a body&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with status=304 should respond without a body&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:543:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;71c6bbea-6258-48b5-875b-c0f2c200cbb4&quot;,
                    &quot;parentUUID&quot;: &quot;58c6ba24-57cf-4b09-8342-d5724b82f915&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 0,
                &quot;totalFailures&quot;: 1,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: false,
                &quot;hasFailures&quot;: true,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 0,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with custom status=700&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the associated status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom status=700 should respond with the associated status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\nstatuses[&#x27;700&#x27;] = &#x27;custom status&#x27;;\napp.use(function *(){\n  this.status = 700;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(700)\n.expect(&#x27;custom status&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;custom status&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:566:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;e5c9fd56-ad41-49f2-aff2-23f8a8411fa6&quot;,
                    &quot;parentUUID&quot;: &quot;416b1609-f46a-4b50-8db7-0497cc2a6304&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;416b1609-f46a-4b50-8db7-0497cc2a6304&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [],
                &quot;failures&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the associated status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom status=700 should respond with the associated status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\nstatuses[&#x27;700&#x27;] = &#x27;custom status&#x27;;\napp.use(function *(){\n  this.status = 700;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(700)\n.expect(&#x27;custom status&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;custom status&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:566:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;e5c9fd56-ad41-49f2-aff2-23f8a8411fa6&quot;,
                    &quot;parentUUID&quot;: &quot;416b1609-f46a-4b50-8db7-0497cc2a6304&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 0,
                &quot;totalFailures&quot;: 1,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: false,
                &quot;hasFailures&quot;: true,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 0,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with custom statusMessage=ok&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the custom status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom statusMessage=ok should respond with the custom status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.message = &#x27;ok&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;ok&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;ok&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:589:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;29ab484f-8f19-491b-aac1-1fdcfdfd9559&quot;,
                    &quot;parentUUID&quot;: &quot;57bb4eb5-b05d-440a-a92d-a99a4f06d017&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;57bb4eb5-b05d-440a-a92d-a99a4f06d017&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [],
                &quot;failures&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the custom status message&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom statusMessage=ok should respond with the custom status message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 0,
                    &quot;state&quot;: &quot;failed&quot;,
                    &quot;pass&quot;: false,
                    &quot;fail&quot;: true,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.message = &#x27;ok&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;ok&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;ok&#x27;);\n  done();\n})&quot;,
                    &quot;err&quot;: {
                      &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
                      &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:589:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                    },
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;29ab484f-8f19-491b-aac1-1fdcfdfd9559&quot;,
                    &quot;parentUUID&quot;: &quot;57bb4eb5-b05d-440a-a92d-a99a4f06d017&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 0,
                &quot;totalFailures&quot;: 1,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: false,
                &quot;hasFailures&quot;: true,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 0,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with custom status without message&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the status code number&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom status without message should respond with the status code number&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.res.statusCode = 701;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(701)\n.expect(&#x27;701&#x27;, done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;3114e1f2-b55e-4d61-a27b-680675c653b6&quot;,
                    &quot;parentUUID&quot;: &quot;3f7483f0-5dba-488d-8557-72936d3464d9&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;3f7483f0-5dba-488d-8557-72936d3464d9&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with the status code number&quot;,
                    &quot;fullTitle&quot;: &quot;when .body is missing with custom status without message should respond with the status code number&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.res.statusCode = 701;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(701)\n.expect(&#x27;701&#x27;, done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;3114e1f2-b55e-4d61-a27b-680675c653b6&quot;,
                    &quot;parentUUID&quot;: &quot;3f7483f0-5dba-488d-8557-72936d3464d9&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;failures&quot;: [],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 1,
                &quot;totalFailures&quot;: 0,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: true,
                &quot;hasFailures&quot;: false,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 2,
                &quot;rootEmpty&quot;: false
              }
            ],
            &quot;tests&quot;: [],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;6e4ee13c-38f8-4434-90f5-47b0f7c3d70a&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: false,
            &quot;hasSuites&quot;: true,
            &quot;totalTests&quot;: 0,
            &quot;totalPasses&quot;: 0,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: false,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 0,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is a null&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should respond 204 by default&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 204 by default&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:630:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b7402624-ec75-441b-ad31-d1e9159e7014&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 204 with status=200&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 204 with status=200&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:652:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;39c70370-d62b-4dbc-89d6-952cc9c01731&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 205 with status=205&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 205 with status=205&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:674:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3d5d0271-e30d-4c5f-92cd-033021b7919e&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 304 with status=304&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 304 with status=304&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:696:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;875a0ba6-7cd8-4294-929a-5aea9f204049&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should respond 204 by default&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 204 by default&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:630:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;b7402624-ec75-441b-ad31-d1e9159e7014&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 204 with status=200&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 204 with status=200&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:652:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;39c70370-d62b-4dbc-89d6-952cc9c01731&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 205 with status=205&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 205 with status=205&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:674:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;3d5d0271-e30d-4c5f-92cd-033021b7919e&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond 304 with status=304&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a null should respond 304 with status=304&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:696:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;875a0ba6-7cd8-4294-929a-5aea9f204049&quot;,
                &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 4,
            &quot;totalPasses&quot;: 0,
            &quot;totalFailures&quot;: 4,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: false,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 0,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is a string&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a string should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bc9fa573-ae08-4316-9eff-e1ebe2fc36a1&quot;,
                &quot;parentUUID&quot;: &quot;d8ecf142-2453-441f-9da0-22f40d6d64d1&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;d8ecf142-2453-441f-9da0-22f40d6d64d1&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a string should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;bc9fa573-ae08-4316-9eff-e1ebe2fc36a1&quot;,
                &quot;parentUUID&quot;: &quot;d8ecf142-2453-441f-9da0-22f40d6d64d1&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is a Buffer&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Buffer should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;Hello&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a40214c7-e8ac-416e-a48c-60b9457dfc65&quot;,
                &quot;parentUUID&quot;: &quot;b167cf4c-8c81-4223-877a-d6835f67277e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;b167cf4c-8c81-4223-877a-d6835f67277e&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Buffer should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;Hello&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;a40214c7-e8ac-416e-a48c-60b9457dfc65&quot;,
                &quot;parentUUID&quot;: &quot;b167cf4c-8c81-4223-877a-d6835f67277e&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 3,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is a Stream&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:751:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;30982b89-8d6b-46a5-9c76-70514fa0f427&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should strip content-length when overwriting&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should strip content-length when overwriting&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello&#x27;;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:774:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f49ef151-c121-4540-969d-40e089d51e4e&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep content-length if not overwritten&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should keep content-length if not overwritten&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:797:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;c36dd382-6b77-4f58-b8bd-bbbdf0d8d23c&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep content-length if overwritten with the same stream&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should keep content-length if overwritten with the same stream&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  var stream = fs.createReadStream(&#x27;package.json&#x27;);\n  this.body = stream;\n  this.body = stream;\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:822:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;554dc374-7b31-497b-b447-e4284ad1d443&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should handle errors&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle errors&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;)\n.expect(404)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;7c11b6d7-446c-4286-b4dd-4dbce902a29f&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should handle errors when no content status&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle errors when no content status&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f18f05d1-e599-4054-bd98-49829c018941&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should handle all intermediate stream body errors&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle all intermediate stream body errors&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;1eca3a5d-4713-4b21-ba8f-73e9000c8bc8&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should handle errors&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle errors&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;)\n.expect(404)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;7c11b6d7-446c-4286-b4dd-4dbce902a29f&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should handle errors when no content status&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle errors when no content status&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f18f05d1-e599-4054-bd98-49829c018941&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should handle all intermediate stream body errors&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should handle all intermediate stream body errors&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 3,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;1eca3a5d-4713-4b21-ba8f-73e9000c8bc8&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should respond&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should respond&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:751:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;30982b89-8d6b-46a5-9c76-70514fa0f427&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should strip content-length when overwriting&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should strip content-length when overwriting&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello&#x27;;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:774:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;f49ef151-c121-4540-969d-40e089d51e4e&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep content-length if not overwritten&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should keep content-length if not overwritten&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:797:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;c36dd382-6b77-4f58-b8bd-bbbdf0d8d23c&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should keep content-length if overwritten with the same stream&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is a Stream should keep content-length if overwritten with the same stream&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  var stream = fs.createReadStream(&#x27;package.json&#x27;);\n  this.body = stream;\n  this.body = stream;\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:822:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;554dc374-7b31-497b-b447-e4284ad1d443&quot;,
                &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 7,
            &quot;totalPasses&quot;: 3,
            &quot;totalFailures&quot;: 4,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 8,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when .body is an Object&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should respond with json&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is an Object should respond with json&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.expect(&#x27;{\&quot;hello\&quot;:\&quot;world\&quot;}&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;fa66a76c-884d-4a60-94a0-4dc6cf076331&quot;,
                &quot;parentUUID&quot;: &quot;63e86dab-3dd9-4d1e-9290-d85e7e08aa74&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;63e86dab-3dd9-4d1e-9290-d85e7e08aa74&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should respond with json&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when .body is an Object should respond with json&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.expect(&#x27;{\&quot;hello\&quot;:\&quot;world\&quot;}&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;fa66a76c-884d-4a60-94a0-4dc6cf076331&quot;,
                &quot;parentUUID&quot;: &quot;63e86dab-3dd9-4d1e-9290-d85e7e08aa74&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 1,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 0,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: false,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when an error occurs&quot;,
            &quot;suites&quot;: [
              {
                &quot;title&quot;: &quot;with an .expose property&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should expose the message&quot;,
                    &quot;fullTitle&quot;: &quot;when an error occurs with an .expose property should expose the message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 4,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;sorry!&#x27;);\n  err.status = 403;\n  err.expose = true;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;sorry!&#x27;)\n.end(done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;628a8677-b38d-4d03-8247-e7c05fc51f60&quot;,
                    &quot;parentUUID&quot;: &quot;e06ac847-ddd4-4f7e-9fa7-101f833d03d1&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;e06ac847-ddd4-4f7e-9fa7-101f833d03d1&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [
                  {
                    &quot;title&quot;: &quot;should expose the message&quot;,
                    &quot;fullTitle&quot;: &quot;when an error occurs with an .expose property should expose the message&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 4,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;sorry!&#x27;);\n  err.status = 403;\n  err.expose = true;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;sorry!&#x27;)\n.end(done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;628a8677-b38d-4d03-8247-e7c05fc51f60&quot;,
                    &quot;parentUUID&quot;: &quot;e06ac847-ddd4-4f7e-9fa7-101f833d03d1&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;failures&quot;: [],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 1,
                &quot;totalFailures&quot;: 0,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: true,
                &quot;hasFailures&quot;: false,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 4,
                &quot;rootEmpty&quot;: false
              },
              {
                &quot;title&quot;: &quot;with a .status property&quot;,
                &quot;suites&quot;: [],
                &quot;tests&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with .status&quot;,
                    &quot;fullTitle&quot;: &quot;when an error occurs with a .status property should respond with .status&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;s3 explodes&#x27;);\n  err.status = 403;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;Forbidden&#x27;)\n.end(done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;2b970da1-6116-49d5-866b-a9f0822ce543&quot;,
                    &quot;parentUUID&quot;: &quot;cf907981-c525-4d73-ba02-c5ccf07016a6&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;pending&quot;: [],
                &quot;root&quot;: false,
                &quot;_timeout&quot;: 2000,
                &quot;file&quot;: &quot;/test/application.js&quot;,
                &quot;uuid&quot;: &quot;cf907981-c525-4d73-ba02-c5ccf07016a6&quot;,
                &quot;beforeHooks&quot;: [],
                &quot;afterHooks&quot;: [],
                &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
                &quot;passes&quot;: [
                  {
                    &quot;title&quot;: &quot;should respond with .status&quot;,
                    &quot;fullTitle&quot;: &quot;when an error occurs with a .status property should respond with .status&quot;,
                    &quot;timedOut&quot;: false,
                    &quot;duration&quot;: 2,
                    &quot;state&quot;: &quot;passed&quot;,
                    &quot;speed&quot;: &quot;fast&quot;,
                    &quot;pass&quot;: true,
                    &quot;fail&quot;: false,
                    &quot;pending&quot;: false,
                    &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;s3 explodes&#x27;);\n  err.status = 403;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;Forbidden&#x27;)\n.end(done);&quot;,
                    &quot;err&quot;: {},
                    &quot;isRoot&quot;: false,
                    &quot;uuid&quot;: &quot;2b970da1-6116-49d5-866b-a9f0822ce543&quot;,
                    &quot;parentUUID&quot;: &quot;cf907981-c525-4d73-ba02-c5ccf07016a6&quot;,
                    &quot;isHook&quot;: false,
                    &quot;skipped&quot;: false
                  }
                ],
                &quot;failures&quot;: [],
                &quot;skipped&quot;: [],
                &quot;hasBeforeHooks&quot;: false,
                &quot;hasAfterHooks&quot;: false,
                &quot;hasTests&quot;: true,
                &quot;hasSuites&quot;: false,
                &quot;totalTests&quot;: 1,
                &quot;totalPasses&quot;: 1,
                &quot;totalFailures&quot;: 0,
                &quot;totalPending&quot;: 0,
                &quot;totalSkipped&quot;: 0,
                &quot;hasPasses&quot;: true,
                &quot;hasFailures&quot;: false,
                &quot;hasPending&quot;: false,
                &quot;hasSkipped&quot;: false,
                &quot;duration&quot;: 2,
                &quot;rootEmpty&quot;: false
              }
            ],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should emit \&quot;error\&quot; on the app&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should emit \&quot;error\&quot; on the app&quot;,
                &quot;timedOut&quot;: true,
                &quot;duration&quot;: 2001,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom&#x27;);\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
                  &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;e3c7559e-c924-4f74-8aa7-426c01f5adf1&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should respond with 500&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should respond with 500&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom!&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(500, &#x27;Internal Server Error&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;5c7137ac-a4dd-4186-8344-1892f527b14c&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should be catchable&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should be catchable&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 12,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  try {\n    yield next;\n    this.body = &#x27;Hello&#x27;;\n  } catch (err) {\n    this.body = &#x27;Got error&#x27;;\n  }\n});\napp.use(function *(next){\n  throw new Error(&#x27;boom!&#x27;);\n  this.body = &#x27;Oh no&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200, &#x27;Got error&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;17662c54-c393-4d26-be63-098c46d62661&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should respond with 500&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should respond with 500&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 4,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom!&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(500, &#x27;Internal Server Error&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;5c7137ac-a4dd-4186-8344-1892f527b14c&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should be catchable&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should be catchable&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 12,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  try {\n    yield next;\n    this.body = &#x27;Hello&#x27;;\n  } catch (err) {\n    this.body = &#x27;Got error&#x27;;\n  }\n});\napp.use(function *(next){\n  throw new Error(&#x27;boom!&#x27;);\n  this.body = &#x27;Oh no&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200, &#x27;Got error&#x27;)\n.end(done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;17662c54-c393-4d26-be63-098c46d62661&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should emit \&quot;error\&quot; on the app&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when an error occurs should emit \&quot;error\&quot; on the app&quot;,
                &quot;timedOut&quot;: true,
                &quot;duration&quot;: 2001,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom&#x27;);\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
                  &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;e3c7559e-c924-4f74-8aa7-426c01f5adf1&quot;,
                &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: true,
            &quot;totalTests&quot;: 3,
            &quot;totalPasses&quot;: 2,
            &quot;totalFailures&quot;: 1,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2017,
            &quot;rootEmpty&quot;: false
          },
          {
            &quot;title&quot;: &quot;when status and body property&quot;,
            &quot;suites&quot;: [],
            &quot;tests&quot;: [
              {
                &quot;title&quot;: &quot;should 200&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when status and body property should 200&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = &#x27;hello&#x27;;\n  this.status = 200;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;31e46d3f-26db-4a13-b376-861ccd7152a7&quot;,
                &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              },
              {
                &quot;title&quot;: &quot;should 204&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when status and body property should 204&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = &#x27;hello&#x27;;\n  this.set(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf8&#x27;);\n  this.status = 204;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.end(function (err, res) {\n  res.should.not.have.header(&#x27;content-type&#x27;);\n  done(err);\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:1023:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d88d16e7-f810-49c4-8c75-926cca4f02e7&quot;,
                &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;pending&quot;: [],
            &quot;root&quot;: false,
            &quot;_timeout&quot;: 2000,
            &quot;file&quot;: &quot;/test/application.js&quot;,
            &quot;uuid&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
            &quot;beforeHooks&quot;: [],
            &quot;afterHooks&quot;: [],
            &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
            &quot;passes&quot;: [
              {
                &quot;title&quot;: &quot;should 200&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when status and body property should 200&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 2,
                &quot;state&quot;: &quot;passed&quot;,
                &quot;speed&quot;: &quot;fast&quot;,
                &quot;pass&quot;: true,
                &quot;fail&quot;: false,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = &#x27;hello&#x27;;\n  this.status = 200;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;hello&#x27;, done);&quot;,
                &quot;err&quot;: {},
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;31e46d3f-26db-4a13-b376-861ccd7152a7&quot;,
                &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;failures&quot;: [
              {
                &quot;title&quot;: &quot;should 204&quot;,
                &quot;fullTitle&quot;: &quot;app.respond when status and body property should 204&quot;,
                &quot;timedOut&quot;: false,
                &quot;duration&quot;: 0,
                &quot;state&quot;: &quot;failed&quot;,
                &quot;pass&quot;: false,
                &quot;fail&quot;: true,
                &quot;pending&quot;: false,
                &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = &#x27;hello&#x27;;\n  this.set(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf8&#x27;);\n  this.status = 204;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.end(function (err, res) {\n  res.should.not.have.header(&#x27;content-type&#x27;);\n  done(err);\n});&quot;,
                &quot;err&quot;: {
                  &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
                  &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:1023:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
                },
                &quot;isRoot&quot;: false,
                &quot;uuid&quot;: &quot;d88d16e7-f810-49c4-8c75-926cca4f02e7&quot;,
                &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
                &quot;isHook&quot;: false,
                &quot;skipped&quot;: false
              }
            ],
            &quot;skipped&quot;: [],
            &quot;hasBeforeHooks&quot;: false,
            &quot;hasAfterHooks&quot;: false,
            &quot;hasTests&quot;: true,
            &quot;hasSuites&quot;: false,
            &quot;totalTests&quot;: 2,
            &quot;totalPasses&quot;: 1,
            &quot;totalFailures&quot;: 1,
            &quot;totalPending&quot;: 0,
            &quot;totalSkipped&quot;: 0,
            &quot;hasPasses&quot;: true,
            &quot;hasFailures&quot;: true,
            &quot;hasPending&quot;: false,
            &quot;hasSkipped&quot;: false,
            &quot;duration&quot;: 2,
            &quot;rootEmpty&quot;: false
          }
        ],
        &quot;tests&quot;: [],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;0bcdf227-cc10-48bd-8482-cda5f74573a5&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: false,
        &quot;hasSuites&quot;: true,
        &quot;totalTests&quot;: 0,
        &quot;totalPasses&quot;: 0,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: false,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 0,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.context&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.context should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;ccd25cd5-c4c2-4e90-ad8a-4e62e5cf2d9e&quot;,
            &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.context should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;bece6085-4d02-4359-ac04-23e27fd76778&quot;,
            &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.context should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;ccd25cd5-c4c2-4e90-ad8a-4e62e5cf2d9e&quot;,
            &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.context should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;bece6085-4d02-4359-ac04-23e27fd76778&quot;,
            &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 2,
        &quot;totalPasses&quot;: 2,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 2,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.request&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.request should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.request.message, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;d4a3c6cb-6672-4a9a-bea1-690a1592b6cb&quot;,
            &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.request should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.request.message, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;9a139b34-fb86-4110-aac6-7b47a266884f&quot;,
            &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.request should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.request.message, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;d4a3c6cb-6672-4a9a-bea1-690a1592b6cb&quot;,
            &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.request should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.request.message, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;9a139b34-fb86-4110-aac6-7b47a266884f&quot;,
            &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 2,
        &quot;totalPasses&quot;: 2,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 4,
        &quot;rootEmpty&quot;: false
      },
      {
        &quot;title&quot;: &quot;app.response&quot;,
        &quot;suites&quot;: [],
        &quot;tests&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.response should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.response.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;64bd6b1e-cfd7-40ea-b75b-a73ebf00f483&quot;,
            &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.response should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.response.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;fc37ec66-7664-453d-b69c-7ccff3d23ae5&quot;,
            &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;pending&quot;: [],
        &quot;root&quot;: false,
        &quot;_timeout&quot;: 2000,
        &quot;file&quot;: &quot;/test/application.js&quot;,
        &quot;uuid&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
        &quot;beforeHooks&quot;: [],
        &quot;afterHooks&quot;: [],
        &quot;fullFile&quot;: &quot;/Users/wuhao/DP_H5_work/koa/koa1/test/application.js&quot;,
        &quot;passes&quot;: [
          {
            &quot;title&quot;: &quot;should merge properties&quot;,
            &quot;fullTitle&quot;: &quot;app.response should merge properties&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 2,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.response.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;64bd6b1e-cfd7-40ea-b75b-a73ebf00f483&quot;,
            &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          },
          {
            &quot;title&quot;: &quot;should not affect the original prototype&quot;,
            &quot;fullTitle&quot;: &quot;app.response should not affect the original prototype&quot;,
            &quot;timedOut&quot;: false,
            &quot;duration&quot;: 1,
            &quot;state&quot;: &quot;passed&quot;,
            &quot;speed&quot;: &quot;fast&quot;,
            &quot;pass&quot;: true,
            &quot;fail&quot;: false,
            &quot;pending&quot;: false,
            &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.response.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
            &quot;err&quot;: {},
            &quot;isRoot&quot;: false,
            &quot;uuid&quot;: &quot;fc37ec66-7664-453d-b69c-7ccff3d23ae5&quot;,
            &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
            &quot;isHook&quot;: false,
            &quot;skipped&quot;: false
          }
        ],
        &quot;failures&quot;: [],
        &quot;skipped&quot;: [],
        &quot;hasBeforeHooks&quot;: false,
        &quot;hasAfterHooks&quot;: false,
        &quot;hasTests&quot;: true,
        &quot;hasSuites&quot;: false,
        &quot;totalTests&quot;: 2,
        &quot;totalPasses&quot;: 2,
        &quot;totalFailures&quot;: 0,
        &quot;totalPending&quot;: 0,
        &quot;totalSkipped&quot;: 0,
        &quot;hasPasses&quot;: true,
        &quot;hasFailures&quot;: false,
        &quot;hasPending&quot;: false,
        &quot;hasSkipped&quot;: false,
        &quot;duration&quot;: 3,
        &quot;rootEmpty&quot;: false
      }
    ],
    &quot;tests&quot;: [],
    &quot;pending&quot;: [],
    &quot;root&quot;: true,
    &quot;_timeout&quot;: 2000,
    &quot;uuid&quot;: &quot;19b77cb4-b575-4f8f-bbcc-7f9acca6c826&quot;,
    &quot;beforeHooks&quot;: [],
    &quot;afterHooks&quot;: [],
    &quot;fullFile&quot;: &quot;&quot;,
    &quot;file&quot;: &quot;&quot;,
    &quot;passes&quot;: [],
    &quot;failures&quot;: [],
    &quot;skipped&quot;: [],
    &quot;hasBeforeHooks&quot;: false,
    &quot;hasAfterHooks&quot;: false,
    &quot;hasTests&quot;: false,
    &quot;hasSuites&quot;: true,
    &quot;totalTests&quot;: 0,
    &quot;totalPasses&quot;: 0,
    &quot;totalFailures&quot;: 0,
    &quot;totalPending&quot;: 0,
    &quot;totalSkipped&quot;: 0,
    &quot;hasPasses&quot;: false,
    &quot;hasFailures&quot;: false,
    &quot;hasPending&quot;: false,
    &quot;hasSkipped&quot;: false,
    &quot;duration&quot;: 0,
    &quot;rootEmpty&quot;: true
  },
  &quot;allTests&quot;: [
    {
      &quot;title&quot;: &quot;should handle socket errors&quot;,
      &quot;fullTitle&quot;: &quot;app should handle socket errors&quot;,
      &quot;timedOut&quot;: true,
      &quot;duration&quot;: 2007,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // triggers this.socket.writable == false\n  this.socket.emit(&#x27;error&#x27;, new Error(&#x27;boom&#x27;));\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
        &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;641c0b23-c5ca-4d08-b4fc-f980769e69a1&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not .writeHead when !socket.writable&quot;,
      &quot;fullTitle&quot;: &quot;app should not .writeHead when !socket.writable&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // set .writable to false\n  this.socket.writable = false;\n  this.status = 204;\n  // throw if .writeHead or .end is called\n  this.res.writeHead =\n  this.res.end = function(){\n    throw new Error(&#x27;response sent&#x27;);\n  };\n})\n// hackish, but the response should occur in a single tick\nsetImmediate(done);\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e4b08348-010b-484d-9600-22eac21434a0&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should set development env when NODE_ENV missing&quot;,
      &quot;fullTitle&quot;: &quot;app should set development env when NODE_ENV missing&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var NODE_ENV = process.env.NODE_ENV;\nprocess.env.NODE_ENV = &#x27;&#x27;;\nvar app = koa();\nprocess.env.NODE_ENV = NODE_ENV;\nassert.equal(app.env, &#x27;development&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e964ad37-0db4-489f-bcd8-436713cbcf2c&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should work&quot;,
      &quot;fullTitle&quot;: &quot;app.toJSON() should work&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar obj = app.toJSON();\nobj.should.eql({\n  subdomainOffset: 2,\n  proxy: false,\n  env: &#x27;test&#x27;\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:69:15)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a28e7671-a15e-423a-9761-1ec60dec35c2&quot;,
      &quot;parentUUID&quot;: &quot;8b74cd26-5c31-4d9b-ba0d-6f4668b6e1a0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should work&quot;,
      &quot;fullTitle&quot;: &quot;app.inspect() should work&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar util = require(&#x27;util&#x27;);\nvar str = util.inspect(app);\nassert.equal(\&quot;{ subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\&quot;, str);&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;&quot;,
        &quot;estack&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;\n    at Context.&lt;anonymous&gt; (test/application.js:82:12)&quot;,
        &quot;diff&quot;: &quot;- { subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\n+ { subdomainOffset: 2, proxy: false, env: &#x27;undefined&#x27; }\n&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a0d003d7-8d34-4ca1-823e-32626b3b20c6&quot;,
      &quot;parentUUID&quot;: &quot;73350234-abae-45dd-abb8-ca709c897710&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should compose middleware&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should compose middleware&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar calls = [];\napp.use(function *(next){\n  calls.push(1);\n  yield next;\n  calls.push(6);\n});\napp.use(function *(next){\n  calls.push(2);\n  yield next;\n  calls.push(5);\n});\napp.use(function *(next){\n  calls.push(3);\n  yield next;\n  calls.push(4);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404)\n.end(function(err){\n  if (err) return done(err);\n  calls.should.eql([1,2,3,4,5,6]);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:116:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;8177e9bf-2589-412e-a46b-28d20c145fe2&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should error when a non-generator function is passed&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should error when a non-generator function is passed&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.use(function(){});\n} catch (err) {\n  err.message.should.equal(&#x27;app.use() requires a generator function&#x27;);\n}&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:127:25)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;69805d01-fc25-433e-bde6-80ff8a3c3c4c&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not error when a non-generator function is passed when .experimental=true&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should not error when a non-generator function is passed when .experimental=true&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.experimental = true;\napp.use(function(){});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;5fa9b996-9292-45de-8bf2-6b059f006f36&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should throw an error if a non-error is given&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should throw an error if a non-error is given&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.onerror(&#x27;foo&#x27;);\n  should.fail();\n} catch (err) {\n  err.should.be.instanceOf(AssertionError);\n  err.message.should.equal(&#x27;non-error thrown: foo&#x27;);\n}\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:147:17)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;358fb66c-7786-4af2-b5b1-96f23f6a2f02&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should do nothing if status is 404&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if status is 404&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar err = new Error();\nerr.status = 404;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:164:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fd7cbfdd-5741-4f08-94aa-396404120cd7&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should do nothing if .silent&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if .silent&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.silent = true;\nvar err = new Error();\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:178:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;0ddf2c30-9286-4d0b-a67d-5143b9dc0ac8&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should log the error to stderr&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should log the error to stderr&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error();\nerr.stack = &#x27;Foo&#x27;;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Foo\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:194:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;29e363fd-acdc-41e7-a1b3-ae26973e084b&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should use err.toString() instad of err.stack&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should use err.toString() instad of err.stack&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error(&#x27;mock stack null&#x27;);\nerr.stack = null;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Error: mock stack null\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:210:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d9915255-f6ab-458b-a2e4-abba6291c7d7&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should bypass app.respond&quot;,
      &quot;fullTitle&quot;: &quot;when this.respond === false should bypass app.respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 5,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n  this.respond = false;\n  var res = this.res;\n  res.statusCode = 200;\n  setImmediate(function(){\n    res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);\n    res.end(&#x27;lol&#x27;);\n  })\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;lol&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d4757f82-922f-423b-9d41-20e0a6b52b47&quot;,
      &quot;parentUUID&quot;: &quot;3b1616fc-ba5a-442d-a120-56ae802163dc&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not send Content-Type header&quot;,
      &quot;fullTitle&quot;: &quot;when this.type === null should not send Content-Type header&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n  this.type = null;\n});\nvar server = app.listen();\nrequest(server)\n  .get(&#x27;/&#x27;)\n  .expect(200)\n  .end(function(err, res){\n    if (err) return done(err);\n    res.should.not.have.header(&#x27;content-type&#x27;);\n    done();\n  });&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:259:21)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;ccf23d22-a600-4811-b314-92ca7556169d&quot;,
      &quot;parentUUID&quot;: &quot;23a00d81-2f84-437a-826c-57438095502a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not respond with the body&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should not respond with the body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;5&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:280:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bb622080-4d63-41a1-ab8c-8b4b08159a36&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep json headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep json headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;17&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:301:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3925ce76-d623-4aa5-959d-fa570174ad3a&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep string headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep string headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello world&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:322:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;8f285de3-8c37-4264-be1c-b8a01df76d10&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep buffer headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep buffer headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;hello world&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:343:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;dba5488f-3190-4f5e-8f36-d78d7083f058&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with a 404 if no body was set&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should respond with a 404 if no body was set&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;6ef1bf0b-8867-40dc-bfa4-235ad1edf12d&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with a 200 if body = \&quot;\&quot;&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should respond with a 200 if body = \&quot;\&quot;&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f3f7f9fb-97bf-4c37-aecc-19205fd3026f&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not overwrite the content-type&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should not overwrite the content-type&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.type = &#x27;application/javascript&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(&#x27;content-type&#x27;, /application\\/javascript/)\n.expect(200, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3bf1473b-b0bc-4dac-aa51-d0ad0b398cd1&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 404&quot;,
      &quot;fullTitle&quot;: &quot;when no middleware are present should 404&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;94d88e17-d802-4088-b956-635e5f49be12&quot;,
      &quot;parentUUID&quot;: &quot;921e832d-9a06-43ba-8488-8672b93ec7a4&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not cause an app error&quot;,
      &quot;fullTitle&quot;: &quot;when res has already been written to should not cause an app error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;)\n  }, 0);\n});\nvar errorCaught = false;\napp.on(&#x27;error&#x27;, function(err){\n  errorCaught = err;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  if (errorCaught) return done(errorCaught);\n  done();\n});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b6da8b84-d370-4475-84e6-9cddc36c57ee&quot;,
      &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should send the right body&quot;,
      &quot;fullTitle&quot;: &quot;when res has already been written to should send the right body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;);\n  }, 0);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;HelloGoodbye&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7d6da28f-bc95-418c-b29d-6c2dc8dad747&quot;,
      &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the associated status message&quot;,
      &quot;fullTitle&quot;: &quot;with status=400 should respond with the associated status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 400;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(400)\n.expect(&#x27;Content-Length&#x27;, 11)\n.expect(&#x27;Bad Request&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;0c9b02ab-8946-4bfe-930d-4603bab209d7&quot;,
      &quot;parentUUID&quot;: &quot;6925725c-45d6-42e2-9a52-3c248ad805d8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=204 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:497:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7b05533d-7565-4c3c-aa62-f5d7909327d5&quot;,
      &quot;parentUUID&quot;: &quot;dd9f8e31-a5c0-478b-adee-fda9f25ef136&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=205 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:520:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e87e9832-d786-46da-a15b-466e0abefe27&quot;,
      &quot;parentUUID&quot;: &quot;71adb34d-5a70-4749-a456-3c5ea7b73829&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=304 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:543:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;71c6bbea-6258-48b5-875b-c0f2c200cbb4&quot;,
      &quot;parentUUID&quot;: &quot;58c6ba24-57cf-4b09-8342-d5724b82f915&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the associated status message&quot;,
      &quot;fullTitle&quot;: &quot;with custom status=700 should respond with the associated status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nstatuses[&#x27;700&#x27;] = &#x27;custom status&#x27;;\napp.use(function *(){\n  this.status = 700;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(700)\n.expect(&#x27;custom status&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;custom status&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:566:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e5c9fd56-ad41-49f2-aff2-23f8a8411fa6&quot;,
      &quot;parentUUID&quot;: &quot;416b1609-f46a-4b50-8db7-0497cc2a6304&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the custom status message&quot;,
      &quot;fullTitle&quot;: &quot;with custom statusMessage=ok should respond with the custom status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.message = &#x27;ok&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;ok&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;ok&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:589:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;29ab484f-8f19-491b-aac1-1fdcfdfd9559&quot;,
      &quot;parentUUID&quot;: &quot;57bb4eb5-b05d-440a-a92d-a99a4f06d017&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the status code number&quot;,
      &quot;fullTitle&quot;: &quot;with custom status without message should respond with the status code number&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.res.statusCode = 701;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(701)\n.expect(&#x27;701&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3114e1f2-b55e-4d61-a27b-680675c653b6&quot;,
      &quot;parentUUID&quot;: &quot;3f7483f0-5dba-488d-8557-72936d3464d9&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 204 by default&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 204 by default&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:630:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b7402624-ec75-441b-ad31-d1e9159e7014&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 204 with status=200&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 204 with status=200&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:652:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;39c70370-d62b-4dbc-89d6-952cc9c01731&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 205 with status=205&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 205 with status=205&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:674:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3d5d0271-e30d-4c5f-92cd-033021b7919e&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 304 with status=304&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 304 with status=304&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:696:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;875a0ba6-7cd8-4294-929a-5aea9f204049&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a string should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bc9fa573-ae08-4316-9eff-e1ebe2fc36a1&quot;,
      &quot;parentUUID&quot;: &quot;d8ecf142-2453-441f-9da0-22f40d6d64d1&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Buffer should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;Hello&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a40214c7-e8ac-416e-a48c-60b9457dfc65&quot;,
      &quot;parentUUID&quot;: &quot;b167cf4c-8c81-4223-877a-d6835f67277e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:751:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;30982b89-8d6b-46a5-9c76-70514fa0f427&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should strip content-length when overwriting&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should strip content-length when overwriting&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello&#x27;;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:774:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f49ef151-c121-4540-969d-40e089d51e4e&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep content-length if not overwritten&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should keep content-length if not overwritten&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:797:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;c36dd382-6b77-4f58-b8bd-bbbdf0d8d23c&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep content-length if overwritten with the same stream&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should keep content-length if overwritten with the same stream&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  var stream = fs.createReadStream(&#x27;package.json&#x27;);\n  this.body = stream;\n  this.body = stream;\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:822:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;554dc374-7b31-497b-b447-e4284ad1d443&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle errors&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle errors&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;)\n.expect(404)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7c11b6d7-446c-4286-b4dd-4dbce902a29f&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle errors when no content status&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle errors when no content status&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f18f05d1-e599-4054-bd98-49829c018941&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle all intermediate stream body errors&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle all intermediate stream body errors&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;1eca3a5d-4713-4b21-ba8f-73e9000c8bc8&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with json&quot;,
      &quot;fullTitle&quot;: &quot;when .body is an Object should respond with json&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.expect(&#x27;{\&quot;hello\&quot;:\&quot;world\&quot;}&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fa66a76c-884d-4a60-94a0-4dc6cf076331&quot;,
      &quot;parentUUID&quot;: &quot;63e86dab-3dd9-4d1e-9290-d85e7e08aa74&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should emit \&quot;error\&quot; on the app&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should emit \&quot;error\&quot; on the app&quot;,
      &quot;timedOut&quot;: true,
      &quot;duration&quot;: 2001,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom&#x27;);\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
        &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e3c7559e-c924-4f74-8aa7-426c01f5adf1&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with 500&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should respond with 500&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom!&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(500, &#x27;Internal Server Error&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;5c7137ac-a4dd-4186-8344-1892f527b14c&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should be catchable&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should be catchable&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 12,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  try {\n    yield next;\n    this.body = &#x27;Hello&#x27;;\n  } catch (err) {\n    this.body = &#x27;Got error&#x27;;\n  }\n});\napp.use(function *(next){\n  throw new Error(&#x27;boom!&#x27;);\n  this.body = &#x27;Oh no&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200, &#x27;Got error&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;17662c54-c393-4d26-be63-098c46d62661&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should expose the message&quot;,
      &quot;fullTitle&quot;: &quot;with an .expose property should expose the message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;sorry!&#x27;);\n  err.status = 403;\n  err.expose = true;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;sorry!&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;628a8677-b38d-4d03-8247-e7c05fc51f60&quot;,
      &quot;parentUUID&quot;: &quot;e06ac847-ddd4-4f7e-9fa7-101f833d03d1&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with .status&quot;,
      &quot;fullTitle&quot;: &quot;with a .status property should respond with .status&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;s3 explodes&#x27;);\n  err.status = 403;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;Forbidden&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;2b970da1-6116-49d5-866b-a9f0822ce543&quot;,
      &quot;parentUUID&quot;: &quot;cf907981-c525-4d73-ba02-c5ccf07016a6&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 200&quot;,
      &quot;fullTitle&quot;: &quot;when status and body property should 200&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = &#x27;hello&#x27;;\n  this.status = 200;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;31e46d3f-26db-4a13-b376-861ccd7152a7&quot;,
      &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 204&quot;,
      &quot;fullTitle&quot;: &quot;when status and body property should 204&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = &#x27;hello&#x27;;\n  this.set(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf8&#x27;);\n  this.status = 204;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.end(function (err, res) {\n  res.should.not.have.header(&#x27;content-type&#x27;);\n  done(err);\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:1023:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d88d16e7-f810-49c4-8c75-926cca4f02e7&quot;,
      &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.context should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;ccd25cd5-c4c2-4e90-ad8a-4e62e5cf2d9e&quot;,
      &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.context should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bece6085-4d02-4359-ac04-23e27fd76778&quot;,
      &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.request should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.request.message, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d4a3c6cb-6672-4a9a-bea1-690a1592b6cb&quot;,
      &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.request should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.request.message, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;9a139b34-fb86-4110-aac6-7b47a266884f&quot;,
      &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.response should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.response.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;64bd6b1e-cfd7-40ea-b75b-a73ebf00f483&quot;,
      &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.response should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.response.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fc37ec66-7664-453d-b69c-7ccff3d23ae5&quot;,
      &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    }
  ],
  &quot;allPending&quot;: [],
  &quot;allPasses&quot;: [
    {
      &quot;title&quot;: &quot;should not .writeHead when !socket.writable&quot;,
      &quot;fullTitle&quot;: &quot;app should not .writeHead when !socket.writable&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // set .writable to false\n  this.socket.writable = false;\n  this.status = 204;\n  // throw if .writeHead or .end is called\n  this.res.writeHead =\n  this.res.end = function(){\n    throw new Error(&#x27;response sent&#x27;);\n  };\n})\n// hackish, but the response should occur in a single tick\nsetImmediate(done);\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e4b08348-010b-484d-9600-22eac21434a0&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should set development env when NODE_ENV missing&quot;,
      &quot;fullTitle&quot;: &quot;app should set development env when NODE_ENV missing&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var NODE_ENV = process.env.NODE_ENV;\nprocess.env.NODE_ENV = &#x27;&#x27;;\nvar app = koa();\nprocess.env.NODE_ENV = NODE_ENV;\nassert.equal(app.env, &#x27;development&#x27;);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e964ad37-0db4-489f-bcd8-436713cbcf2c&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not error when a non-generator function is passed when .experimental=true&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should not error when a non-generator function is passed when .experimental=true&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.experimental = true;\napp.use(function(){});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;5fa9b996-9292-45de-8bf2-6b059f006f36&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should bypass app.respond&quot;,
      &quot;fullTitle&quot;: &quot;when this.respond === false should bypass app.respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 5,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n  this.respond = false;\n  var res = this.res;\n  res.statusCode = 200;\n  setImmediate(function(){\n    res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);\n    res.end(&#x27;lol&#x27;);\n  })\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;lol&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d4757f82-922f-423b-9d41-20e0a6b52b47&quot;,
      &quot;parentUUID&quot;: &quot;3b1616fc-ba5a-442d-a120-56ae802163dc&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with a 404 if no body was set&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should respond with a 404 if no body was set&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;6ef1bf0b-8867-40dc-bfa4-235ad1edf12d&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with a 200 if body = \&quot;\&quot;&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should respond with a 200 if body = \&quot;\&quot;&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f3f7f9fb-97bf-4c37-aecc-19205fd3026f&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not overwrite the content-type&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should not overwrite the content-type&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.type = &#x27;application/javascript&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(&#x27;content-type&#x27;, /application\\/javascript/)\n.expect(200, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3bf1473b-b0bc-4dac-aa51-d0ad0b398cd1&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 404&quot;,
      &quot;fullTitle&quot;: &quot;when no middleware are present should 404&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;94d88e17-d802-4088-b956-635e5f49be12&quot;,
      &quot;parentUUID&quot;: &quot;921e832d-9a06-43ba-8488-8672b93ec7a4&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not cause an app error&quot;,
      &quot;fullTitle&quot;: &quot;when res has already been written to should not cause an app error&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;)\n  }, 0);\n});\nvar errorCaught = false;\napp.on(&#x27;error&#x27;, function(err){\n  errorCaught = err;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  if (errorCaught) return done(errorCaught);\n  done();\n});&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b6da8b84-d370-4475-84e6-9cddc36c57ee&quot;,
      &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should send the right body&quot;,
      &quot;fullTitle&quot;: &quot;when res has already been written to should send the right body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  var res = this.res;\n  this.status = 200;\n  res.setHeader(\&quot;Content-Type\&quot;, \&quot;text/html\&quot;)\n  res.write(&#x27;Hello&#x27;);\n  setTimeout(function(){\n    res.end(\&quot;Goodbye\&quot;);\n  }, 0);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;HelloGoodbye&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7d6da28f-bc95-418c-b29d-6c2dc8dad747&quot;,
      &quot;parentUUID&quot;: &quot;bfe949d2-efa9-41ed-958f-f388bdd33bd8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the associated status message&quot;,
      &quot;fullTitle&quot;: &quot;with status=400 should respond with the associated status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 400;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(400)\n.expect(&#x27;Content-Length&#x27;, 11)\n.expect(&#x27;Bad Request&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;0c9b02ab-8946-4bfe-930d-4603bab209d7&quot;,
      &quot;parentUUID&quot;: &quot;6925725c-45d6-42e2-9a52-3c248ad805d8&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the status code number&quot;,
      &quot;fullTitle&quot;: &quot;with custom status without message should respond with the status code number&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.res.statusCode = 701;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(701)\n.expect(&#x27;701&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3114e1f2-b55e-4d61-a27b-680675c653b6&quot;,
      &quot;parentUUID&quot;: &quot;3f7483f0-5dba-488d-8557-72936d3464d9&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a string should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bc9fa573-ae08-4316-9eff-e1ebe2fc36a1&quot;,
      &quot;parentUUID&quot;: &quot;d8ecf142-2453-441f-9da0-22f40d6d64d1&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Buffer should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;Hello&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a40214c7-e8ac-416e-a48c-60b9457dfc65&quot;,
      &quot;parentUUID&quot;: &quot;b167cf4c-8c81-4223-877a-d6835f67277e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle errors&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle errors&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;)\n.expect(404)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7c11b6d7-446c-4286-b4dd-4dbce902a29f&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle errors when no content status&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle errors when no content status&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f18f05d1-e599-4054-bd98-49829c018941&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should handle all intermediate stream body errors&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should handle all intermediate stream body errors&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n  this.body = fs.createReadStream(&#x27;does not exist&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;1eca3a5d-4713-4b21-ba8f-73e9000c8bc8&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with json&quot;,
      &quot;fullTitle&quot;: &quot;when .body is an Object should respond with json&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.expect(&#x27;{\&quot;hello\&quot;:\&quot;world\&quot;}&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fa66a76c-884d-4a60-94a0-4dc6cf076331&quot;,
      &quot;parentUUID&quot;: &quot;63e86dab-3dd9-4d1e-9290-d85e7e08aa74&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with 500&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should respond with 500&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom!&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(500, &#x27;Internal Server Error&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;5c7137ac-a4dd-4186-8344-1892f527b14c&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should be catchable&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should be catchable&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 12,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  try {\n    yield next;\n    this.body = &#x27;Hello&#x27;;\n  } catch (err) {\n    this.body = &#x27;Got error&#x27;;\n  }\n});\napp.use(function *(next){\n  throw new Error(&#x27;boom!&#x27;);\n  this.body = &#x27;Oh no&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200, &#x27;Got error&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;17662c54-c393-4d26-be63-098c46d62661&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should expose the message&quot;,
      &quot;fullTitle&quot;: &quot;with an .expose property should expose the message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 4,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;sorry!&#x27;);\n  err.status = 403;\n  err.expose = true;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;sorry!&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;628a8677-b38d-4d03-8247-e7c05fc51f60&quot;,
      &quot;parentUUID&quot;: &quot;e06ac847-ddd4-4f7e-9fa7-101f833d03d1&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with .status&quot;,
      &quot;fullTitle&quot;: &quot;with a .status property should respond with .status&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  var err = new Error(&#x27;s3 explodes&#x27;);\n  err.status = 403;\n  throw err;\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.expect(403, &#x27;Forbidden&#x27;)\n.end(done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;2b970da1-6116-49d5-866b-a9f0822ce543&quot;,
      &quot;parentUUID&quot;: &quot;cf907981-c525-4d73-ba02-c5ccf07016a6&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 200&quot;,
      &quot;fullTitle&quot;: &quot;when status and body property should 200&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = &#x27;hello&#x27;;\n  this.status = 200;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;hello&#x27;, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;31e46d3f-26db-4a13-b376-861ccd7152a7&quot;,
      &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.context should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;ccd25cd5-c4c2-4e90-ad8a-4e62e5cf2d9e&quot;,
      &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.context should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bece6085-4d02-4359-ac04-23e27fd76778&quot;,
      &quot;parentUUID&quot;: &quot;b8d23ff1-a585-4ae2-95d9-ece56b18d1e7&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.request should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.request.message, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d4a3c6cb-6672-4a9a-bea1-690a1592b6cb&quot;,
      &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.request should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.request.message, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;9a139b34-fb86-4110-aac6-7b47a266884f&quot;,
      &quot;parentUUID&quot;: &quot;a16a3817-0938-4790-865d-7a521f5b6811&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should merge properties&quot;,
      &quot;fullTitle&quot;: &quot;app.response should merge properties&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 2,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app1.use(function *(next){\n  assert.equal(this.response.msg, &#x27;hello&#x27;)\n  this.status = 204\n});\nrequest(app1.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;64bd6b1e-cfd7-40ea-b75b-a73ebf00f483&quot;,
      &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not affect the original prototype&quot;,
      &quot;fullTitle&quot;: &quot;app.response should not affect the original prototype&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 1,
      &quot;state&quot;: &quot;passed&quot;,
      &quot;speed&quot;: &quot;fast&quot;,
      &quot;pass&quot;: true,
      &quot;fail&quot;: false,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;app2.use(function *(next){\n  assert.equal(this.response.msg, undefined)\n  this.status = 204;\n});\nrequest(app2.listen())\n.get(&#x27;/&#x27;)\n.expect(204, done);&quot;,
      &quot;err&quot;: {},
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fc37ec66-7664-453d-b69c-7ccff3d23ae5&quot;,
      &quot;parentUUID&quot;: &quot;17a13e9c-3047-4ffb-beeb-ed9fe84f58dd&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    }
  ],
  &quot;allFailures&quot;: [
    {
      &quot;title&quot;: &quot;should handle socket errors&quot;,
      &quot;fullTitle&quot;: &quot;app should handle socket errors&quot;,
      &quot;timedOut&quot;: true,
      &quot;duration&quot;: 2007,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(next){\n  // triggers this.socket.writable == false\n  this.socket.emit(&#x27;error&#x27;, new Error(&#x27;boom&#x27;));\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
        &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;641c0b23-c5ca-4d08-b4fc-f980769e69a1&quot;,
      &quot;parentUUID&quot;: &quot;411ce8c7-20dc-493b-bb5a-4398763acc7f&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should work&quot;,
      &quot;fullTitle&quot;: &quot;app.toJSON() should work&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar obj = app.toJSON();\nobj.should.eql({\n  subdomainOffset: 2,\n  proxy: false,\n  env: &#x27;test&#x27;\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:69:15)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a28e7671-a15e-423a-9761-1ec60dec35c2&quot;,
      &quot;parentUUID&quot;: &quot;8b74cd26-5c31-4d9b-ba0d-6f4668b6e1a0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should work&quot;,
      &quot;fullTitle&quot;: &quot;app.inspect() should work&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 3,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar util = require(&#x27;util&#x27;);\nvar str = util.inspect(app);\nassert.equal(\&quot;{ subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\&quot;, str);&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;&quot;,
        &quot;estack&quot;: &quot;AssertionError: &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;test\\&#x27; }&#x27; == &#x27;{ subdomainOffset: 2, proxy: false, env: \\&#x27;undefined\\&#x27; }&#x27;\n    at Context.&lt;anonymous&gt; (test/application.js:82:12)&quot;,
        &quot;diff&quot;: &quot;- { subdomainOffset: 2, proxy: false, env: &#x27;test&#x27; }\n+ { subdomainOffset: 2, proxy: false, env: &#x27;undefined&#x27; }\n&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;a0d003d7-8d34-4ca1-823e-32626b3b20c6&quot;,
      &quot;parentUUID&quot;: &quot;73350234-abae-45dd-abb8-ca709c897710&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should compose middleware&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should compose middleware&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar calls = [];\napp.use(function *(next){\n  calls.push(1);\n  yield next;\n  calls.push(6);\n});\napp.use(function *(next){\n  calls.push(2);\n  yield next;\n  calls.push(5);\n});\napp.use(function *(next){\n  calls.push(3);\n  yield next;\n  calls.push(4);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(404)\n.end(function(err){\n  if (err) return done(err);\n  calls.should.eql([1,2,3,4,5,6]);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:116:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;8177e9bf-2589-412e-a46b-28d20c145fe2&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should error when a non-generator function is passed&quot;,
      &quot;fullTitle&quot;: &quot;app.use(fn) should error when a non-generator function is passed&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.use(function(){});\n} catch (err) {\n  err.message.should.equal(&#x27;app.use() requires a generator function&#x27;);\n}&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:127:25)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;69805d01-fc25-433e-bde6-80ff8a3c3c4c&quot;,
      &quot;parentUUID&quot;: &quot;c8aa0af5-0b1c-4acb-8a39-3e49694b97b0&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should throw an error if a non-error is given&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should throw an error if a non-error is given&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\ntry {\n  app.onerror(&#x27;foo&#x27;);\n  should.fail();\n} catch (err) {\n  err.should.be.instanceOf(AssertionError);\n  err.message.should.equal(&#x27;non-error thrown: foo&#x27;);\n}\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;be&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:147:17)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;358fb66c-7786-4af2-b5b1-96f23f6a2f02&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should do nothing if status is 404&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if status is 404&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nvar err = new Error();\nerr.status = 404;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:164:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;fd7cbfdd-5741-4f08-94aa-396404120cd7&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should do nothing if .silent&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should do nothing if .silent&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.silent = true;\nvar err = new Error();\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:178:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;0ddf2c30-9286-4d0b-a67d-5143b9dc0ac8&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should log the error to stderr&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should log the error to stderr&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error();\nerr.stack = &#x27;Foo&#x27;;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Foo\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:194:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;29e363fd-acdc-41e7-a1b3-ae26973e084b&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should use err.toString() instad of err.stack&quot;,
      &quot;fullTitle&quot;: &quot;app.onerror(err) should use err.toString() instad of err.stack&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.env = &#x27;dev&#x27;;\nvar err = new Error(&#x27;mock stack null&#x27;);\nerr.stack = null;\nvar output = stderr.inspectSync(function() {\n  app.onerror(err);\n});\noutput.should.eql([\&quot;\\n\&quot;, \&quot;  Error: mock stack null\\n\&quot;, \&quot;\\n\&quot;]);\ndone();&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;eql&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/application.js:210:18)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d9915255-f6ab-458b-a2e4-abba6291c7d7&quot;,
      &quot;parentUUID&quot;: &quot;1a701163-3898-4eba-9461-92eeb1d03021&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not send Content-Type header&quot;,
      &quot;fullTitle&quot;: &quot;when this.type === null should not send Content-Type header&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;&#x27;;\n  this.type = null;\n});\nvar server = app.listen();\nrequest(server)\n  .get(&#x27;/&#x27;)\n  .expect(200)\n  .end(function(err, res){\n    if (err) return done(err);\n    res.should.not.have.header(&#x27;content-type&#x27;);\n    done();\n  });&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:259:21)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;ccf23d22-a600-4811-b314-92ca7556169d&quot;,
      &quot;parentUUID&quot;: &quot;23a00d81-2f84-437a-826c-57438095502a&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should not respond with the body&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should not respond with the body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;Hello&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;5&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:280:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;bb622080-4d63-41a1-ab8c-8b4b08159a36&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep json headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep json headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = { hello: &#x27;world&#x27; };\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;17&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:301:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3925ce76-d623-4aa5-959d-fa570174ad3a&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep string headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep string headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello world&#x27;;\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:322:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;8f285de3-8c37-4264-be1c-b8a01df76d10&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep buffer headers&quot;,
      &quot;fullTitle&quot;: &quot;when HEAD is used should keep buffer headers&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = new Buffer(&#x27;hello world&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.head(&#x27;/&#x27;)\n.expect(200)\n.end(function(err, res){\n  if (err) return done(err);\n  res.should.have.header(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;, &#x27;11&#x27;);\n  assert(0 == res.text.length);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:343:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;dba5488f-3190-4f5e-8f36-d78d7083f058&quot;,
      &quot;parentUUID&quot;: &quot;d92a162e-05ff-4fc3-bb69-d93535b6a23e&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=204 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 204;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:497:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;7b05533d-7565-4c3c-aa62-f5d7909327d5&quot;,
      &quot;parentUUID&quot;: &quot;dd9f8e31-a5c0-478b-adee-fda9f25ef136&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=205 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:520:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e87e9832-d786-46da-a15b-466e0abefe27&quot;,
      &quot;parentUUID&quot;: &quot;71adb34d-5a70-4749-a456-3c5ea7b73829&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond without a body&quot;,
      &quot;fullTitle&quot;: &quot;with status=304 should respond without a body&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:543:28)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;71c6bbea-6258-48b5-875b-c0f2c200cbb4&quot;,
      &quot;parentUUID&quot;: &quot;58c6ba24-57cf-4b09-8342-d5724b82f915&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the associated status message&quot;,
      &quot;fullTitle&quot;: &quot;with custom status=700 should respond with the associated status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\nstatuses[&#x27;700&#x27;] = &#x27;custom status&#x27;;\napp.use(function *(){\n  this.status = 700;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(700)\n.expect(&#x27;custom status&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;custom status&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:566:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e5c9fd56-ad41-49f2-aff2-23f8a8411fa6&quot;,
      &quot;parentUUID&quot;: &quot;416b1609-f46a-4b50-8db7-0497cc2a6304&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond with the custom status message&quot;,
      &quot;fullTitle&quot;: &quot;with custom statusMessage=ok should respond with the custom status message&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.message = &#x27;ok&#x27;;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(200)\n.expect(&#x27;ok&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.res.statusMessage.should.equal(&#x27;ok&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;equal&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:589:39)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;29ab484f-8f19-491b-aac1-1fdcfdfd9559&quot;,
      &quot;parentUUID&quot;: &quot;57bb4eb5-b05d-440a-a92d-a99a4f06d017&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 204 by default&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 204 by default&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:630:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;b7402624-ec75-441b-ad31-d1e9159e7014&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 204 with status=200&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 204 with status=200&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:652:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;39c70370-d62b-4dbc-89d6-952cc9c01731&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 205 with status=205&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 205 with status=205&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 205;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(205)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:674:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;3d5d0271-e30d-4c5f-92cd-033021b7919e&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond 304 with status=304&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a null should respond 304 with status=304&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 304;\n  this.body = null;\n})\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(304)\n.expect(&#x27;&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  res.header.should.not.have.property(&#x27;content-type&#x27;);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:696:26)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:703:3)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;875a0ba6-7cd8-4294-929a-5aea9f204049&quot;,
      &quot;parentUUID&quot;: &quot;72398050-29e3-42cb-bcf5-bb4442d2248c&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should respond&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should respond&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:751:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;30982b89-8d6b-46a5-9c76-70514fa0f427&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should strip content-length when overwriting&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should strip content-length when overwriting&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.body = &#x27;hello&#x27;;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.not.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:774:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;f49ef151-c121-4540-969d-40e089d51e4e&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep content-length if not overwritten&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should keep content-length if not overwritten&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  this.body = fs.createReadStream(&#x27;package.json&#x27;);\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:797:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;c36dd382-6b77-4f58-b8bd-bbbdf0d8d23c&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should keep content-length if overwritten with the same stream&quot;,
      &quot;fullTitle&quot;: &quot;when .body is a Stream should keep content-length if overwritten with the same stream&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.length = fs.readFileSync(&#x27;package.json&#x27;).length;\n  var stream = fs.createReadStream(&#x27;package.json&#x27;);\n  this.body = stream;\n  this.body = stream;\n  this.set(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;);\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(&#x27;Content-Type&#x27;, &#x27;application/json; charset=utf-8&#x27;)\n.end(function(err, res){\n  if (err) return done(err);\n  var pkg = require(&#x27;../package&#x27;);\n  res.should.have.header(&#x27;Content-Length&#x27;);\n  res.body.should.eql(pkg);\n  done();\n})&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;have&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:822:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;554dc374-7b31-497b-b447-e4284ad1d443&quot;,
      &quot;parentUUID&quot;: &quot;d063c7b5-4ec0-4a45-b996-ecc9b60005df&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should emit \&quot;error\&quot; on the app&quot;,
      &quot;fullTitle&quot;: &quot;when an error occurs should emit \&quot;error\&quot; on the app&quot;,
      &quot;timedOut&quot;: true,
      &quot;duration&quot;: 2001,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  throw new Error(&#x27;boom&#x27;);\n});\napp.on(&#x27;error&#x27;, function(err){\n  err.message.should.equal(&#x27;boom&#x27;);\n  done();\n});\nrequest(app.listen())\n.get(&#x27;/&#x27;)\n.end(function(){});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;,
        &quot;estack&quot;: &quot;Error: Timeout of 2000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves.&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;e3c7559e-c924-4f74-8aa7-426c01f5adf1&quot;,
      &quot;parentUUID&quot;: &quot;41f2c022-75a1-4028-bd45-800ca80631a2&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    },
    {
      &quot;title&quot;: &quot;should 204&quot;,
      &quot;fullTitle&quot;: &quot;when status and body property should 204&quot;,
      &quot;timedOut&quot;: false,
      &quot;duration&quot;: 0,
      &quot;state&quot;: &quot;failed&quot;,
      &quot;pass&quot;: false,
      &quot;fail&quot;: true,
      &quot;pending&quot;: false,
      &quot;code&quot;: &quot;var app = koa();\napp.use(function *(){\n  this.status = 200;\n  this.body = &#x27;hello&#x27;;\n  this.set(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf8&#x27;);\n  this.status = 204;\n});\nvar server = app.listen();\nrequest(server)\n.get(&#x27;/&#x27;)\n.expect(204)\n.end(function (err, res) {\n  res.should.not.have.header(&#x27;content-type&#x27;);\n  done(err);\n});&quot;,
      &quot;err&quot;: {
        &quot;message&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined&quot;,
        &quot;estack&quot;: &quot;TypeError: Cannot read property &#x27;not&#x27; of undefined\n    at Test.&lt;anonymous&gt; (test/application.js:1023:19)\n    at Test.assert (node_modules/supertest/lib/test.js:156:6)\n    at assert (node_modules/supertest/lib/test.js:127:12)\n    at node_modules/supertest/lib/test.js:124:5\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:691:12)\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/index.js:922:12)\n    at endReadableNT (_stream_readable.js:974:12)\n    at _combinedTickCallback (internal/process/next_tick.js:74:11)\n    at process._tickCallback (internal/process/next_tick.js:98:9)&quot;
      },
      &quot;isRoot&quot;: false,
      &quot;uuid&quot;: &quot;d88d16e7-f810-49c4-8c75-926cca4f02e7&quot;,
      &quot;parentUUID&quot;: &quot;03af4ac5-c025-43bc-ae7c-d947d0400cc5&quot;,
      &quot;isHook&quot;: false,
      &quot;skipped&quot;: false
    }
  ],
  &quot;copyrightYear&quot;: 2017
}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;koa1&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;dev&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveJson&quot;:true,&quot;jsonFile&quot;:&quot;/Users/wuhao/DP_H5_work/koa/koa1/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/wuhao/DP_H5_work/koa/koa1/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>